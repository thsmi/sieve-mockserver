
<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">

  <title>Sieve Test Server</title>

  <script type="module" src="/main.mjs"></script>

  <style>
body {
  font-family:  Arial,x-locale-body,sans-serif;
  font-size: 0.75em;
  background-image:  url('data:image/png;base64,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');
}


h1 {
  color: #666;
  font-family: Georgia, Bitstream Vera, Serif;
}

h2 {
  font-family: Georgia, Bitstream Vera, Serif;
font-size: 12pt;
color: #666;
padding: 0px 0px 2px 0px;
margin-bottom: 5px;
border-bottom: 1px dotted #666;
font-weight: normal;
}

.sidenav {
  vertical-align: middle;
  flex: 0 0 250px;
  padding: 10px;
  background-color: #EEE;
  /*color: #666;*/
  color:black;
  overflow: hidden;  
  padding-bottom:30px;
}

/* Style page content */
.main {  
  flex:100%;
  padding: 10px 20px;
  background-color: white;
}

.main textarea {
  width:  100%;
}

.content {
  margin: auto;
  max-width: 1000px;

  display: flex;
  
  width: 100%;

  border-radius: 5px;
  border: 1px solid darkgray;
  overflow: hidden;
}

.indent {
  padding-left: 2em;
}
    </style>

</head>

<body>

  <div class="content">
    <div class="main">
  <h1>Tests</h1>  

  <textarea id="txtTest" rows="20" spellcheck="false"></textarea> <br>  
  <h1>Output</h1>
  
  <textarea id="txtOutput" rows="20" readonly></textarea> <br>

</div>


  <div class="sidenav">
  <h2>Mission Control</h2>
  <div>
    <button id="btnStartTest">Start Test</button><button id="btnStopTest">Stop Test</button><br>
    <button id="btnStopServer">Shutdown Server</button>
  </div>

  <button id="btnLog">Test</button>
  <h2>Templates</h2>
  <div>
    <label for="cbTemplates">Load template for</label>
  
    <select id="cbTemplates">
      <optgroup label="Generic">
        <option value="anonymous">Anonymous</option>
        <option value="badcert">Bad Cert Reconnect</option>
      </optgroup>
      <optgroup label="Commands">
        <option value="command-deletescript-success">DELETESCRIPT success</option>
        <option value="command-deletescript-failure">DELETESCRIPT failure</option>
        <option value="command-renamescript-success">RENAMESCRIPT success</option>
        <option value="command-renamescript-failure">RENAMESCRIPT failure</option>
      </optgroup>
      <optgroup label="Referrals">
        <option value="referral-on-starttls">Referral on STARTTLS</option>
        <option value="referral-on-authenticate">Referral on AUTHENTICATE</option>
        <option value="referral-on-listscripts">Referral on LISTSCRIPTS</option>
      </optgroup>

      <optgroup label="SASL SCRAM">
        <option value="sasl-scram-sha1">SHA1</option>
        <option value="sasl-scram-sha1-inline">SHA1 - Inline</option>
        <option value="sasl-scram-sha1-broken">SHA1 - Broken Validation</option>
        <option value="sasl-scram-sha1-broken-inline">SHA1 - Inline & Broken Validation</option>
        <option value="sasl-scram-sha256">SHA256</option>
        <option value="sasl-scram-sha256-inline">SHA256 - Inline</option>
        <option value="sasl-scram-sha256-broken">SHA256 - Broken Validation</option>
        <option value="sasl-scram-sha256-broken-inline">SHA256 - Inline & Broken Validation</option>
        <option value="sasl-scram-sha512">SHA512</option>
        <option value="sasl-scram-sha512-inline">SHA512 - Inline</option>
        <option value="sasl-scram-sha512-broken">SHA512 - Broken Validation</option>
        <option value="sasl-scram-sha512-broken-inline">SHA512 - Inline & Broken Validation</option> 
      </optgroup>

      <optgroup label="SASL Mechanisms">
        <option value="sasl-external">SASL-EXTERNAL</option>
        <option value="sasl-login">SASL-LOGIN</option>
        <option value="sasl-plain">SASL-PLAIN</option>

        <option value="sasl-scram-sha256">SASL-SCRAM-SHA1</option>
        <option value="sasl-scram-sha512">SASL-SCRAM-SHA512</option>
      </optgroup>
    </select>
  </div>
  <h2>StartTLS</h2>
  <!-- SUPPORT_TLS -->
  <input type="checkbox" id="cbxStartTLS">
  <label for="cbxStartTLS">Disable secure upgrade via startTLS</label><br>

    <!-- KEYSTORE -->
    <input type="checkbox" id="cbxKeyStore">
    <label for="cbxKeyStore">Custom keystore</label><br>
    <div class="indent">  
      <input type="text" id="txtKeystore"><button>Set</button><br>  
    </div>

    <input type="checkbox" id="cbxKeyStorePassphrase">
    <label for="cbxKeyStorePassphrase">Custom keystore passphrase</label><br>
    <div class="indent">  
      <input type="text" id="txtKeyStorePassphrase"><button>Set</button><br>  
    </div>


    <!-- TRUSTSTORE -->
    <input type="checkbox" id="cbxTrustStore">
    <label for="cbxTrustStore">Custom truststore</label><br>
    <div class="indent">
      <input type="text" id="txtTruststore"><button>Set</button><br>
    </div>

    <input type="checkbox" id="cbxTrustStorePassphrase">
    <label for="cbxTrustStorePassphrase">Custom truststore passphrase</label><br>
    <div class="indent">  
      <input type="text" id="txtTrustStorePassphrase"><button>Set</button><br>  
    </div>    


    <!-- SECURE_SASL -->
    <input type="checkbox" id="cbxSecureSasl">
    <label for="cbxSecureSasl">Enforce secure login</label><br>
    <div class="indent">Advertise SASL Mechanisms only on secure channels</div>

  <h2>Server</h2>

  <!-- simulate fragmentation -->
  <input type="checkbox" id="cbxFragment">
  <label for="cbxFragment">Fragment Response</label><br>
  
  <!-- Simulate delay-->
  <input type="checkbox" id="cbxSlowResponse">
  <label for="cbxSlowResponse">Simulate slow responding server</label><br>

  <!-- Simulate Cyrus Bug -->
  <input type="checkbox" id="cbxCyrusBug">
  <label for="cbxCyrusBug">Simulate Cyrus StartTLS Bug</label><br>  

  <!-- Respawn -->
  <input type="checkbox" id="cbxRespawn">
  <label for="cbxRespawn">Auto Respawn fake sieve servers</label><br>    

</div>
</div>

</body>
</html>